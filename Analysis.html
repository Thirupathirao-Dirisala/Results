<!DOCTYPE html>
<html>
<head>
    <link
            rel="stylesheet"
            href="https://pyscript.net/latest/pyscript.css"/>
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <style>
    .main{
        margin-left:50px;
        margin-right:50px;
        margin-top:10px;
        margin-bottom:10px;
    }
th{
    background-color:orange;
    text-align:center;
    color:white;
    width:50%;
    font-weight: bold;
    }
    td{
        text-align:center;
    }
    table{
    border-radius:5px;
    border: 1px solid #000;
    width:80%;
    border-collapse:collapse;
    }
    </style>
</head>
<body>
    <div class="main">
        <table >
            <tr>
                <th>Regd.No.</th>
                <td><py-script>
                    import js
                    from js import document
                    r=js.localStorage.getItem('myValue')
                    display(r)</py-script>
                </td>
                <td rowspan="3"> <img id="imag" border="2" src="https://raw.githubusercontent.com/Thirupathirao-Dirisala/Results/main/y20ait506.jpg" width="220px" height="220px" alt="Photo"/></td>
            </tr>
            <tr>
                <th>Full Name</th>
                <td>Full Name</td>
            </tr>
            <tr>
                <th>Father Name</th>
                <td>Father Name</td>
            </tr>
        </table><h1 id="hel1"></h1>
    <div class=container" id="line1"></div>
    <h1 id="hel2"></h1>
        <div id="line2">

        </div>
    <py-config>
        packages = ["pandas","matplotlib","requests","Image"]
    </py-config>

    <py-script output="lineplot">
import js
from js import document
r=js.localStorage.getItem('myValue')
R=r.upper()
from pyodide.http import open_url
from pyodide.http import pyfetch
for k in range(1,1+1):
    for j in range(1,3):
        if k==2 and j>=s:
            break
        else:
            import pandas as pd
            import matplotlib.pyplot as plt
            l1=[]
            l2=[]
            l3=[]
            df = pd.read_csv(open_url(f'https://raw.githubusercontent.com/Thirupathirao-Dirisala/Results/main/SEM-{k}.{j}.csv'))
            x=df.loc[df["REDG NO"] == r]
            d = x.to_dict(orient='records')
            l1 = list(d[0].keys())[4:]
            l2 = list(d[0].values())[4:]
        
            for i in l2:
                l3.append(int(i.split()[0]))
            txt=f'SEM-{k}.{j} Results'
            display(txt,target=f"hel{j}")
            txt=""
            tabl=pd.DataFrame(list(zip(l1,l3)),columns=['Subject','Marks'])
            html_table=tabl.to_html(index=False)
            display(HTML(html_table),target=f"line{j}")
            plt.rcParams["figure.figsize"]=(15,5)
            plt.subplot(1,2,1)
            plt.bar(l1,l3,facecolor="orange",label=l3,edgecolor="black")
            plt.subplot(1,2,2)
            plt.pie(l3,labels=l1,autopct="%.0f%%")
            display(plt,target=f"line{j}")
            plt.clf()
            from pyodide.http import pyfetch
    </py-script>
    </div>
</body>
</html>
